package day5;

import java.util.Arrays;
import java.util.function.Function;

public class Day5 {
    public static void main(String[] args) {
        String input = "2\n" +
                "2\n" +
                "1\n" +
                "2\n" +
                "-3\n" +
                "-4\n" +
                "2\n" +
                "-4\n" +
                "-6\n" +
                "0\n" +
                "1\n" +
                "-10\n" +
                "0\n" +
                "-10\n" +
                "-1\n" +
                "-6\n" +
                "-11\n" +
                "-14\n" +
                "-2\n" +
                "-7\n" +
                "-12\n" +
                "-18\n" +
                "1\n" +
                "-6\n" +
                "-18\n" +
                "-11\n" +
                "2\n" +
                "-19\n" +
                "-4\n" +
                "-18\n" +
                "-7\n" +
                "-8\n" +
                "-28\n" +
                "0\n" +
                "-3\n" +
                "-13\n" +
                "-29\n" +
                "-28\n" +
                "-16\n" +
                "-15\n" +
                "-1\n" +
                "-33\n" +
                "-6\n" +
                "-6\n" +
                "-27\n" +
                "0\n" +
                "-3\n" +
                "-22\n" +
                "-47\n" +
                "-46\n" +
                "-34\n" +
                "0\n" +
                "-49\n" +
                "-33\n" +
                "-19\n" +
                "-3\n" +
                "0\n" +
                "-8\n" +
                "-37\n" +
                "-43\n" +
                "-28\n" +
                "-11\n" +
                "-18\n" +
                "-29\n" +
                "-44\n" +
                "-19\n" +
                "-42\n" +
                "-40\n" +
                "-61\n" +
                "-2\n" +
                "-25\n" +
                "-52\n" +
                "-69\n" +
                "-57\n" +
                "-9\n" +
                "-52\n" +
                "-24\n" +
                "-48\n" +
                "-11\n" +
                "-27\n" +
                "-72\n" +
                "-45\n" +
                "-14\n" +
                "-46\n" +
                "-56\n" +
                "-15\n" +
                "-75\n" +
                "-67\n" +
                "-11\n" +
                "-18\n" +
                "-43\n" +
                "-32\n" +
                "-39\n" +
                "-59\n" +
                "-47\n" +
                "-61\n" +
                "-28\n" +
                "-33\n" +
                "-14\n" +
                "-60\n" +
                "-1\n" +
                "-18\n" +
                "-60\n" +
                "-50\n" +
                "-14\n" +
                "-95\n" +
                "-101\n" +
                "-103\n" +
                "-7\n" +
                "-9\n" +
                "-48\n" +
                "-110\n" +
                "-28\n" +
                "-29\n" +
                "-73\n" +
                "-41\n" +
                "-13\n" +
                "-57\n" +
                "-67\n" +
                "-30\n" +
                "-65\n" +
                "-97\n" +
                "-59\n" +
                "-118\n" +
                "-119\n" +
                "-101\n" +
                "-35\n" +
                "-41\n" +
                "-123\n" +
                "-41\n" +
                "-109\n" +
                "-1\n" +
                "-58\n" +
                "-118\n" +
                "-107\n" +
                "-1\n" +
                "-35\n" +
                "-2\n" +
                "-27\n" +
                "-7\n" +
                "-92\n" +
                "-117\n" +
                "-109\n" +
                "-121\n" +
                "-83\n" +
                "-61\n" +
                "-114\n" +
                "-112\n" +
                "-77\n" +
                "-145\n" +
                "-18\n" +
                "-91\n" +
                "-2\n" +
                "-101\n" +
                "-106\n" +
                "-92\n" +
                "-145\n" +
                "-4\n" +
                "-156\n" +
                "-108\n" +
                "-60\n" +
                "-95\n" +
                "-81\n" +
                "0\n" +
                "-37\n" +
                "-112\n" +
                "-132\n" +
                "-112\n" +
                "-94\n" +
                "-3\n" +
                "-117\n" +
                "-155\n" +
                "-160\n" +
                "-112\n" +
                "-43\n" +
                "-72\n" +
                "-106\n" +
                "-110\n" +
                "-108\n" +
                "-124\n" +
                "-132\n" +
                "-180\n" +
                "-109\n" +
                "-12\n" +
                "-107\n" +
                "-86\n" +
                "-181\n" +
                "-59\n" +
                "-168\n" +
                "-57\n" +
                "-179\n" +
                "-143\n" +
                "-146\n" +
                "-46\n" +
                "-82\n" +
                "-19\n" +
                "-30\n" +
                "-150\n" +
                "-164\n" +
                "-178\n" +
                "-152\n" +
                "-197\n" +
                "-66\n" +
                "-139\n" +
                "-179\n" +
                "-31\n" +
                "-194\n" +
                "-146\n" +
                "-141\n" +
                "-205\n" +
                "-52\n" +
                "-12\n" +
                "-194\n" +
                "-112\n" +
                "-44\n" +
                "-144\n" +
                "-13\n" +
                "-99\n" +
                "-48\n" +
                "-73\n" +
                "-80\n" +
                "1\n" +
                "-91\n" +
                "-125\n" +
                "-74\n" +
                "-108\n" +
                "-43\n" +
                "-101\n" +
                "-212\n" +
                "-160\n" +
                "-152\n" +
                "-93\n" +
                "-85\n" +
                "-122\n" +
                "-88\n" +
                "-64\n" +
                "-26\n" +
                "-64\n" +
                "-209\n" +
                "-39\n" +
                "-102\n" +
                "-200\n" +
                "-195\n" +
                "-61\n" +
                "-85\n" +
                "-80\n" +
                "-137\n" +
                "-98\n" +
                "-5\n" +
                "-217\n" +
                "-94\n" +
                "-200\n" +
                "-88\n" +
                "-170\n" +
                "-201\n" +
                "-91\n" +
                "-25\n" +
                "-29\n" +
                "-92\n" +
                "-237\n" +
                "-139\n" +
                "-146\n" +
                "-194\n" +
                "-4\n" +
                "-250\n" +
                "-227\n" +
                "-33\n" +
                "-212\n" +
                "-72\n" +
                "-144\n" +
                "-73\n" +
                "-185\n" +
                "-101\n" +
                "-115\n" +
                "-168\n" +
                "-72\n" +
                "-50\n" +
                "-88\n" +
                "-179\n" +
                "-271\n" +
                "-83\n" +
                "-205\n" +
                "-193\n" +
                "-171\n" +
                "-142\n" +
                "-86\n" +
                "-154\n" +
                "-172\n" +
                "-44\n" +
                "-234\n" +
                "-77\n" +
                "-198\n" +
                "-54\n" +
                "-270\n" +
                "-6\n" +
                "-166\n" +
                "-265\n" +
                "-194\n" +
                "-221\n" +
                "-1\n" +
                "-251\n" +
                "-220\n" +
                "-54\n" +
                "-285\n" +
                "-268\n" +
                "-22\n" +
                "-168\n" +
                "-16\n" +
                "-116\n" +
                "-189\n" +
                "-120\n" +
                "-84\n" +
                "-273\n" +
                "-140\n" +
                "-292\n" +
                "-254\n" +
                "-167\n" +
                "-190\n" +
                "-147\n" +
                "-51\n" +
                "-50\n" +
                "-143\n" +
                "-204\n" +
                "-233\n" +
                "-87\n" +
                "-80\n" +
                "-321\n" +
                "-112\n" +
                "-81\n" +
                "-234\n" +
                "-209\n" +
                "-15\n" +
                "-315\n" +
                "-68\n" +
                "-58\n" +
                "-283\n" +
                "-332\n" +
                "-74\n" +
                "-252\n" +
                "-187\n" +
                "-187\n" +
                "-220\n" +
                "-334\n" +
                "-108\n" +
                "-163\n" +
                "-262\n" +
                "-327\n" +
                "-330\n" +
                "-89\n" +
                "-265\n" +
                "-254\n" +
                "-108\n" +
                "-140\n" +
                "-104\n" +
                "-104\n" +
                "-245\n" +
                "-306\n" +
                "-69\n" +
                "-75\n" +
                "-297\n" +
                "-351\n" +
                "-198\n" +
                "-3\n" +
                "-318\n" +
                "-221\n" +
                "-185\n" +
                "-211\n" +
                "-151\n" +
                "-221\n" +
                "-352\n" +
                "-95\n" +
                "-301\n" +
                "-30\n" +
                "-365\n" +
                "-237\n" +
                "-344\n" +
                "-157\n" +
                "-173\n" +
                "-358\n" +
                "-25\n" +
                "-325\n" +
                "-108\n" +
                "-48\n" +
                "-335\n" +
                "1\n" +
                "-121\n" +
                "-277\n" +
                "-284\n" +
                "-121\n" +
                "-97\n" +
                "-99\n" +
                "-315\n" +
                "-74\n" +
                "-263\n" +
                "-366\n" +
                "-20\n" +
                "-329\n" +
                "-288\n" +
                "-284\n" +
                "-247\n" +
                "-236\n" +
                "-196\n" +
                "-104\n" +
                "-347\n" +
                "-24\n" +
                "-83\n" +
                "-134\n" +
                "-322\n" +
                "-74\n" +
                "-199\n" +
                "-101\n" +
                "-272\n" +
                "-313\n" +
                "-129\n" +
                "-94\n" +
                "-60\n" +
                "-309\n" +
                "-60\n" +
                "-287\n" +
                "-308\n" +
                "-187\n" +
                "-125\n" +
                "-14\n" +
                "-324\n" +
                "-3\n" +
                "-358\n" +
                "-199\n" +
                "-152\n" +
                "-91\n" +
                "-60\n" +
                "-300\n" +
                "-316\n" +
                "-90\n" +
                "-54\n" +
                "-60\n" +
                "-307\n" +
                "-216\n" +
                "-231\n" +
                "-373\n" +
                "-228\n" +
                "-111\n" +
                "-365\n" +
                "-352\n" +
                "-87\n" +
                "-359\n" +
                "-411\n" +
                "-293\n" +
                "-26\n" +
                "-1\n" +
                "-159\n" +
                "-324\n" +
                "-210\n" +
                "-308\n" +
                "-251\n" +
                "-201\n" +
                "-367\n" +
                "-119\n" +
                "-448\n" +
                "-239\n" +
                "-275\n" +
                "-215\n" +
                "-294\n" +
                "-104\n" +
                "-298\n" +
                "-196\n" +
                "-43\n" +
                "-43\n" +
                "1\n" +
                "-174\n" +
                "-200\n" +
                "-358\n" +
                "-395\n" +
                "-328\n" +
                "-340\n" +
                "-9\n" +
                "-350\n" +
                "-2\n" +
                "-466\n" +
                "-127\n" +
                "-9\n" +
                "-158\n" +
                "-161\n" +
                "-345\n" +
                "-71\n" +
                "-410\n" +
                "-189\n" +
                "-287\n" +
                "-334\n" +
                "-377\n" +
                "-39\n" +
                "-316\n" +
                "-153\n" +
                "-169\n" +
                "-155\n" +
                "-459\n" +
                "-328\n" +
                "-289\n" +
                "-443\n" +
                "-339\n" +
                "-442\n" +
                "-5\n" +
                "-1\n" +
                "-416\n" +
                "-395\n" +
                "-493\n" +
                "-364\n" +
                "-295\n" +
                "1\n" +
                "-270\n" +
                "-496\n" +
                "-280\n" +
                "-19\n" +
                "-49\n" +
                "-216\n" +
                "-142\n" +
                "-492\n" +
                "-511\n" +
                "-285\n" +
                "-113\n" +
                "-237\n" +
                "-322\n" +
                "-402\n" +
                "-254\n" +
                "-366\n" +
                "-281\n" +
                "-501\n" +
                "-368\n" +
                "-159\n" +
                "-527\n" +
                "-289\n" +
                "-441\n" +
                "-268\n" +
                "-118\n" +
                "-246\n" +
                "-154\n" +
                "-116\n" +
                "-294\n" +
                "-39\n" +
                "-218\n" +
                "-306\n" +
                "-196\n" +
                "-225\n" +
                "-435\n" +
                "-298\n" +
                "-456\n" +
                "-380\n" +
                "-163\n" +
                "-489\n" +
                "-408\n" +
                "-137\n" +
                "-410\n" +
                "-128\n" +
                "-499\n" +
                "-484\n" +
                "-195\n" +
                "-202\n" +
                "-547\n" +
                "-364\n" +
                "-347\n" +
                "-304\n" +
                "-473\n" +
                "-208\n" +
                "-474\n" +
                "-384\n" +
                "-437\n" +
                "-104\n" +
                "-310\n" +
                "-109\n" +
                "-378\n" +
                "-517\n" +
                "-330\n" +
                "-324\n" +
                "-87\n" +
                "-100\n" +
                "-351\n" +
                "-275\n" +
                "-376\n" +
                "-7\n" +
                "-128\n" +
                "-378\n" +
                "-452\n" +
                "-383\n" +
                "-270\n" +
                "-309\n" +
                "-281\n" +
                "-351\n" +
                "-183\n" +
                "-213\n" +
                "-68\n" +
                "-183\n" +
                "-503\n" +
                "-36\n" +
                "-584\n" +
                "-359\n" +
                "-482\n" +
                "-152\n" +
                "-404\n" +
                "-3\n" +
                "-460\n" +
                "-397\n" +
                "-559\n" +
                "-441\n" +
                "-356\n" +
                "-251\n" +
                "-448\n" +
                "-229\n" +
                "-49\n" +
                "-27\n" +
                "-164\n" +
                "-430\n" +
                "-327\n" +
                "-514\n" +
                "-485\n" +
                "-164\n" +
                "-255\n" +
                "-453\n" +
                "-143\n" +
                "-484\n" +
                "-263\n" +
                "-19\n" +
                "-348\n" +
                "-190\n" +
                "-49\n" +
                "-610\n" +
                "-77\n" +
                "-347\n" +
                "-30\n" +
                "-382\n" +
                "-486\n" +
                "-42\n" +
                "-550\n" +
                "-39\n" +
                "-75\n" +
                "-523\n" +
                "-258\n" +
                "-77\n" +
                "-552\n" +
                "-196\n" +
                "-234\n" +
                "-504\n" +
                "-133\n" +
                "-308\n" +
                "-629\n" +
                "-81\n" +
                "-359\n" +
                "-429\n" +
                "-251\n" +
                "-115\n" +
                "-192\n" +
                "-459\n" +
                "-353\n" +
                "-68\n" +
                "-471\n" +
                "-630\n" +
                "0\n" +
                "-345\n" +
                "-566\n" +
                "-434\n" +
                "-638\n" +
                "-550\n" +
                "-79\n" +
                "-557\n" +
                "-289\n" +
                "-170\n" +
                "-495\n" +
                "-575\n" +
                "-584\n" +
                "-407\n" +
                "-382\n" +
                "-540\n" +
                "-641\n" +
                "-202\n" +
                "-378\n" +
                "-32\n" +
                "-652\n" +
                "-573\n" +
                "-372\n" +
                "-107\n" +
                "-396\n" +
                "-202\n" +
                "-554\n" +
                "-675\n" +
                "-141\n" +
                "-437\n" +
                "-588\n" +
                "-194\n" +
                "-205\n" +
                "-186\n" +
                "-58\n" +
                "-8\n" +
                "-624\n" +
                "-63\n" +
                "-499\n" +
                "-540\n" +
                "1\n" +
                "-215\n" +
                "-579\n" +
                "-305\n" +
                "-690\n" +
                "-412\n" +
                "-540\n" +
                "-488\n" +
                "-168\n" +
                "-174\n" +
                "-645\n" +
                "-655\n" +
                "-509\n" +
                "-336\n" +
                "-430\n" +
                "-591\n" +
                "-304\n" +
                "-300\n" +
                "-472\n" +
                "-40\n" +
                "-100\n" +
                "-154\n" +
                "-38\n" +
                "-315\n" +
                "-492\n" +
                "-179\n" +
                "-198\n" +
                "-605\n" +
                "-310\n" +
                "-458\n" +
                "0\n" +
                "-74\n" +
                "-186\n" +
                "-463\n" +
                "-354\n" +
                "-627\n" +
                "-341\n" +
                "-360\n" +
                "-380\n" +
                "-527\n" +
                "-656\n" +
                "-42\n" +
                "-643\n" +
                "-691\n" +
                "-460\n" +
                "-404\n" +
                "-118\n" +
                "-332\n" +
                "-36\n" +
                "-486\n" +
                "-519\n" +
                "-511\n" +
                "-611\n" +
                "-711\n" +
                "-482\n" +
                "-384\n" +
                "-327\n" +
                "-470\n" +
                "-112\n" +
                "-302\n" +
                "-479\n" +
                "-732\n" +
                "-506\n" +
                "-179\n" +
                "-512\n" +
                "2\n" +
                "-525\n" +
                "-616\n" +
                "-161\n" +
                "-702\n" +
                "-348\n" +
                "-359\n" +
                "-354\n" +
                "-680\n" +
                "-548\n" +
                "-707\n" +
                "-215\n" +
                "-379\n" +
                "-412\n" +
                "-589\n" +
                "-687\n" +
                "-276\n" +
                "-758\n" +
                "-86\n" +
                "-489\n" +
                "-609\n" +
                "-429\n" +
                "-12\n" +
                "-779\n" +
                "-243\n" +
                "-146\n" +
                "-696\n" +
                "-668\n" +
                "-576\n" +
                "-247\n" +
                "-280\n" +
                "-785\n" +
                "-683\n" +
                "-659\n" +
                "-232\n" +
                "-45\n" +
                "-115\n" +
                "-744\n" +
                "-687\n" +
                "-642\n" +
                "-222\n" +
                "-531\n" +
                "-111\n" +
                "-644\n" +
                "-712\n" +
                "-623\n" +
                "-569\n" +
                "-778\n" +
                "-610\n" +
                "-389\n" +
                "-186\n" +
                "-112\n" +
                "-457\n" +
                "-62\n" +
                "-543\n" +
                "-43\n" +
                "-59\n" +
                "-431\n" +
                "-578\n" +
                "-280\n" +
                "-576\n" +
                "-302\n" +
                "-482\n" +
                "-108\n" +
                "-504\n" +
                "-405\n" +
                "-370\n" +
                "-328\n" +
                "-145\n" +
                "-277\n" +
                "-484\n" +
                "-622\n" +
                "-80\n" +
                "-242\n" +
                "-750\n" +
                "-668\n" +
                "-509\n" +
                "-481\n" +
                "-824\n" +
                "-265\n" +
                "-107\n" +
                "-718\n" +
                "-296\n" +
                "-792\n" +
                "-377\n" +
                "-532\n" +
                "-774\n" +
                "-599\n" +
                "-528\n" +
                "-630\n" +
                "-665\n" +
                "-428\n" +
                "-419\n" +
                "-722\n" +
                "-303\n" +
                "-18\n" +
                "-89\n" +
                "-845\n" +
                "-548\n" +
                "-109\n" +
                "-715\n" +
                "-55\n" +
                "-74\n" +
                "-493\n" +
                "-123\n" +
                "-452\n" +
                "-713\n" +
                "-515\n" +
                "-382\n" +
                "-633\n" +
                "-450\n" +
                "-61\n" +
                "-108\n" +
                "-520\n" +
                "-42\n" +
                "-498\n" +
                "-48\n" +
                "-750\n" +
                "-652\n" +
                "-88\n" +
                "-152\n" +
                "-852\n" +
                "-215\n" +
                "-839\n" +
                "-353\n" +
                "-349\n" +
                "-306\n" +
                "-710\n" +
                "-90\n" +
                "-120\n" +
                "-360\n" +
                "-402\n" +
                "-336\n" +
                "-656\n" +
                "-510\n" +
                "-649\n" +
                "-31\n" +
                "-698\n" +
                "-344\n" +
                "-125\n" +
                "-502\n" +
                "-589\n" +
                "-289\n" +
                "-604\n" +
                "-600\n" +
                "-270\n" +
                "-508\n" +
                "-51\n" +
                "-862\n" +
                "-670\n" +
                "-211\n" +
                "-117\n" +
                "1\n" +
                "-835\n" +
                "-101\n" +
                "-125\n" +
                "-858\n" +
                "-156\n" +
                "-565\n" +
                "-861\n" +
                "-36\n" +
                "-732\n" +
                "-667\n" +
                "-3\n" +
                "-189\n" +
                "-19\n" +
                "-452\n" +
                "-327\n" +
                "-750\n" +
                "-678\n" +
                "-80\n" +
                "-155\n" +
                "-428\n" +
                "-446\n" +
                "-206\n" +
                "-698\n" +
                "-895\n" +
                "-321\n" +
                "-267\n" +
                "-492\n" +
                "-830\n" +
                "-101\n" +
                "-355\n" +
                "-610\n" +
                "-426\n" +
                "-242\n" +
                "-376\n" +
                "-871\n" +
                "-495\n" +
                "-3\n" +
                "-319\n" +
                "-718\n" +
                "-632\n" +
                "-590\n" +
                "-90\n" +
                "-791\n" +
                "-52\n" +
                "-692\n" +
                "-54\n" +
                "-86\n" +
                "-705\n" +
                "-174\n" +
                "-853\n" +
                "-31\n" +
                "-774\n" +
                "-172\n" +
                "-962\n" +
                "-168\n" +
                "-123\n" +
                "-590\n" +
                "-817\n" +
                "-379\n" +
                "-355\n" +
                "-101\n" +
                "-647\n" +
                "-696\n" +
                "-950\n" +
                "-859\n" +
                "-178\n" +
                "-546\n" +
                "-829\n" +
                "-378\n" +
                "-669\n" +
                "-837\n" +
                "-11\n" +
                "-577\n" +
                "-942\n" +
                "-674\n" +
                "-267\n" +
                "-474\n" +
                "-284\n" +
                "-617\n" +
                "-892\n" +
                "-568\n" +
                "-274\n" +
                "-790\n" +
                "-661\n" +
                "-277\n" +
                "-379\n" +
                "-741\n" +
                "-949\n" +
                "-681\n" +
                "-202\n" +
                "-681\n" +
                "-6\n" +
                "-50\n" +
                "-930\n" +
                "-367\n" +
                "-590\n" +
                "-498\n" +
                "-120\n" +
                "-737\n" +
                "-393\n" +
                "-765\n" +
                "-344\n" +
                "-937\n" +
                "-271\n" +
                "-766\n" +
                "-920\n" +
                "-204\n" +
                "-621\n" +
                "-714\n" +
                "-17\n" +
                "-554\n" +
                "-1003\n" +
                "-605\n" +
                "-616\n" +
                "-1013\n" +
                "-730\n" +
                "-621\n" +
                "-488\n" +
                "-1022\n" +
                "-163\n" +
                "-38\n" +
                "-418\n" +
                "-920\n" +
                "-155\n" +
                "-286\n" +
                "-969\n" +
                "-426\n" +
                "-370\n" +
                "-153\n" +
                "-940\n" +
                "-1009\n" +
                "-659\n" +
                "-629\n" +
                "-186\n" +
                "-511\n" +
                "-989\n" +
                "-809\n" +
                "-285\n" +
                "-397\n" +
                "-87\n" +
                "-153\n" +
                "-493\n" +
                "-1021\n" +
                "-817\n" +
                "-444\n" +
                "-46\n" +
                "-667\n" +
                "-845\n" +
                "-641\n" +
                "-20\n" +
                "-756\n" +
                "-973\n" +
                "-811\n" +
                "-355\n" +
                "-1042\n" +
                "-329\n" +
                "-400\n" +
                "-297";
        int[] jumps = Arrays.stream(input.split("\n")).mapToInt(Integer::parseInt).toArray();

        System.out.println(calculateJumpCount(jumps, Day5::strategyA));
        System.out.println(calculateJumpCount(jumps, Day5::strategyB));
    }

    private static int calculateJumpCount(int[] jumps, Function<Integer, Integer> postJumpModifier) {
        // Clone the input array because we need to keep track of updates, and modifying input is evil
        int[] jumpsClone = jumps.clone();
        int jumpCount = 0;
        int jumpPointer = 0;
        while (jumpPointer >= 0 && jumpPointer < jumpsClone.length) {
            int nextJump = jumpsClone[jumpPointer];
            jumpsClone[jumpPointer] = postJumpModifier.apply(nextJump);
            jumpPointer = jumpPointer + nextJump;
            jumpCount++;
        }
        return jumpCount;
    }

    private static int strategyA(int jump) {
        // after each jump, the offset of that instruction increases by 1
        return jump + 1;
    }

    private static int strategyB(int jump) {
        // if the offset was three or more, instead decrease it by 1. Otherwise, increase it by 1 as before.
        return jump >= 3 ? jump - 1 : jump + 1;
    }
}
